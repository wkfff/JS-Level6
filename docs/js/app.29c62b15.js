(function(e){function t(t){for(var a,r,i=t[0],u=t[1],s=t[2],l=0,m=[];l<i.length;l++)r=i[l],o[r]&&m.push(o[r][0]),o[r]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);d&&d(t);while(m.length)m.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,r=1;r<n.length;r++){var i=n[r];0!==o[i]&&(a=!1)}a&&(c.splice(t--,1),e=u(u.s=n[0]))}return e}var a={},r={app:0},o={app:0},c=[];function i(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-04bca714":"9be11477","chunk-3a5b99a2":"dcd309d0","chunk-3d6bb8bf":"1e4855e5","chunk-4e0b28ec":"6c8fd6df","chunk-64b77889":"31d14441","chunk-64ea9039":"a640ac33","chunk-dde201e6":"f818570d"}[e]+".js"}function u(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={"chunk-04bca714":1,"chunk-3a5b99a2":1,"chunk-3d6bb8bf":1,"chunk-4e0b28ec":1,"chunk-64b77889":1,"chunk-64ea9039":1,"chunk-dde201e6":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise(function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-04bca714":"d7e85baf","chunk-3a5b99a2":"d7e85baf","chunk-3d6bb8bf":"d7e85baf","chunk-4e0b28ec":"d7e85baf","chunk-64b77889":"d7e85baf","chunk-64ea9039":"d7e85baf","chunk-dde201e6":"d7e85baf"}[e]+".css",o=u.p+a,c=document.getElementsByTagName("link"),i=0;i<c.length;i++){var s=c[i],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===a||l===o))return t()}var m=document.getElementsByTagName("style");for(i=0;i<m.length;i++){s=m[i],l=s.getAttribute("data-href");if(l===a||l===o)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var a=t&&t.target&&t.target.src||o,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");c.request=a,delete r[e],d.parentNode.removeChild(d),n(c)},d.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(d)}).then(function(){r[e]=0}));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var c=new Promise(function(t,n){a=o[e]=[t,n]});t.push(a[2]=c);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=i(e),s=function(t){l.onerror=l.onload=null,clearTimeout(m);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,c=new Error("Loading chunk "+e+" failed.\n("+a+": "+r+")");c.type=a,c.request=r,n[1](c)}o[e]=void 0}};var m=setTimeout(function(){s({type:"timeout",target:l})},12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=a,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)u.d(n,a,function(t){return e[t]}.bind(null,a));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var m=0;m<s.length;m++)t(s[m]);var d=l;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},"4ec3":function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return i}),n.d(t,"e",function(){return u}),n.d(t,"d",function(){return s}),n.d(t,"f",function(){return l}),n.d(t,"c",function(){return m}),n.d(t,"g",function(){return d});var a=n("bc3a"),r=n.n(a),o=r.a.create({baseURL:"https://arcane-temple-97328.herokuapp.com/"}),c=function(e){return o.post("/room",e)},i=function(e){return o.delete("/room",{data:{roomID:e._id}})},u=function(){return o.get("/room")},s=function(e){return o.get("/room/".concat(e))},l=function(e,t){var n={nickName:e,roomID:t};return o.put("/room",n)},m=function(e,t){return o.delete("/room/drop",{data:{roomName:e,nickName:t}})},d=function(e){return o.post("/room/".concat(e,"/play"))}},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),r=(n("4989"),n("7bb1")),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("router-view")],1)},c=[],i={},u=i,s=n("2877"),l=Object(s["a"])(u,o,c,!1,null,null,null),m=l.exports,d=n("8c4f"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"game-container pt-5 text-center"},[e._m(0),n("div",{staticClass:"d-flex mt-4 justify-content-between"},[n("button",{staticClass:"btn btn-game btn-game-lg mr-3",on:{click:e.playSingleMode}},[e._v("1P")]),n("button",{staticClass:"btn btn-game btn-game-lg mr-3",on:{click:e.playOnlineMode}},[e._v("線上對戰")]),n("button",{staticClass:"btn btn-game btn-game-lg",attrs:{"data-toggle":"modal","data-target":"#gameRuleModal"}},[e._v("\n      遊戲規則\n    ")])]),e._m(1)])},p=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h1",{staticClass:"game-start-title"},[n("span",{staticClass:"game-start-title__number"},[e._v("60")]),n("div",{staticClass:"game-start-title__subtitle"},[n("div",{staticClass:"d-flex"},[n("span",[e._v("SECONDS")]),n("span",{staticClass:"game-start-title__symbol-box"},[e._v("+−×÷")])]),n("span",[e._v("CHALLENGE")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal fade",attrs:{id:"gameRuleModal"}},[n("div",{staticClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header bg-primary text-secondary"},[n("h5",{staticClass:"modal-title h3",attrs:{id:"exampleModalCenterTitle"}},[e._v("遊戲規則")]),n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[n("span",{staticClass:"text-white",attrs:{"aria-hidden":"true"}},[e._v("×")])])]),n("div",{staticClass:"modal-body"},[n("ul",[n("li",{staticClass:"text-left"},[e._v("0~20 秒為 1位數計算 (5-3)，21~40 秒為 2 位數計算 (30*19)，41~60 秒為 3 位數計算\n            (332+312)，加減乘除規則請用隨機產生，不可寫死題目，60 秒內可無限次數答題。")]),n("li",{staticClass:"text-left"},[e._v("0~40 秒答對加一分，41~60 秒答對加五分，答錯扣一分，最多僅能扣到零分")])])]),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[e._v("關閉")])])])])])}],b=(n("a481"),n("cebc")),h=n("2f62"),g={data:function(){return{}},methods:Object(b["a"])({},Object(h["b"])(["resetGameScore"]),{playSingleMode:function(){this.resetGameScore(),this.$router.replace("/game-play")},playOnlineMode:function(){this.resetGameScore(),this.$router.replace("/game-online-mode")}})},v=g,y=(n("bc89"),Object(s["a"])(v,f,p,!1,null,null,null)),k=y.exports;a["a"].use(d["a"]);var O,_=new d["a"]({routes:[{path:"/",name:"gameStart",component:k},{path:"/game-play",name:"gamePlay",component:function(){return n.e("chunk-3d6bb8bf").then(n.bind(null,"4bcf"))}},{path:"/game-end",name:"gameEnd",component:function(){return n.e("chunk-3a5b99a2").then(n.bind(null,"b696"))}},{path:"/game-online-mode",name:"gameOnlineSetting",component:function(){return n.e("chunk-4e0b28ec").then(n.bind(null,"875e"))}},{path:"/create-room",name:"createRoom",component:function(){return n.e("chunk-64b77889").then(n.bind(null,"b15a"))}},{path:"/join-room",name:"joinRoom",component:function(){return n.e("chunk-dde201e6").then(n.bind(null,"4a03"))}},{path:"/game-online-play",name:"gameOnlinePlay",component:function(){return n.e("chunk-64ea9039").then(n.bind(null,"4bad"))}},{path:"/game-online-end",name:"gameOnlineEnd",component:function(){return n.e("chunk-04bca714").then(n.bind(null,"2f4e"))}}]}),S=(n("6b54"),n("bd86")),j="SET_SCORE",w="SET_STAGE",R="RESET_SCORE",E="CREATE_ROOM",x="SET_ROOM",C="DROP_ROOM",T="LEAVE_ROOM",M="SET_PLAYER",N="SET_ROOMS",P="SET_SET_ONLINE_TIMERROOMS",A="SET_SYSTEM_MESSAGE",D=(O={},Object(S["a"])(O,w,function(e,t){e.gameStage=t}),Object(S["a"])(O,j,function(e,t){e.score+=t,e.score<0&&(e.score=0)}),Object(S["a"])(O,R,function(e){e.score=0,e.gameStage="gameStart",e.room=null,e.player={},e.rooms=[],e.onlineTimer=60,e.systemMessage=""}),Object(S["a"])(O,x,function(e,t){e.room=t}),Object(S["a"])(O,C,function(e){e.room=null}),Object(S["a"])(O,E,function(e,t){e.room=t}),Object(S["a"])(O,T,function(e){e.room=null}),Object(S["a"])(O,M,function(e,t){e.player=t}),Object(S["a"])(O,N,function(e,t){e.rooms=t}),Object(S["a"])(O,P,function(e,t){e.onlineTimer=t}),Object(S["a"])(O,A,function(e,t){e.systemMessage=t}),O),G=(n("96cf"),n("3b8d")),I=n("4ec3"),L={setGameStage:function(e,t){var n=e.commit;n(w,t)},validateAnswer:function(e,t){var n=e.commit,a=t.time,r=t.answer,o=t.question;r!==o.answer?n(j,-1):n(j,a>=20?1:5)},resetGameScore:function(e){var t=e.commit;t(R)},dropRoom:function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t,n){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,e.prev=1,a(C,null),e.next=5,Object(I["c"])(n.roomName,n.nickName);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[1,7]])}));function t(t,n){return e.apply(this,arguments)}return t}(),setRoom:function(e,t){var n=e.commit;n(x,t)},createRoom:function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t,n){var a,r,o,c,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,r=n.roomName,o=n.nickName,console.log("createRoom",r,o),e.prev=3,e.next=6,Object(I["a"])({roomName:r,nickName:o});case 6:c=e.sent,i=c.data,a(M,{nickName:o}),a(E,i.room),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](3),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[3,12]])}));function t(t,n){return e.apply(this,arguments)}return t}(),joinRoom:function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t,n){var a,r,o,c,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,r=n.nickName,o=n.roomName,e.prev=2,e.next=5,Object(I["f"])(r,o);case 5:c=e.sent,i=c.data,a(M,{nickName:r}),a(x,i),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[2,11]])}));function t(t,n){return e.apply(this,arguments)}return t}(),getRoom:function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,a=t.state,e.prev=1,e.next=4,Object(I["d"])(a.room._id);case 4:r=e.sent,o=r.data,n(x,o.room),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[1,9]])}));function t(t){return e.apply(this,arguments)}return t}(),leaveRoom:function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t,n){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.commit,!n){e.next=12;break}return e.prev=2,e.next=5,Object(I["b"])(n);case 5:a(T),a(M,{}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}));function t(t,n){return e.apply(this,arguments)}return t}(),setPlayer:function(e,t){var n=e.commit;n(M,t)},getAllRooms:function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t){var n,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,Object(I["e"])();case 3:a=e.sent,r=a.data,n(N,r.rooms);case 6:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},$=n("8055"),q=n.n($),B=function(e){var t=null,n=q()("https://arcane-temple-97328.herokuapp.com/");n.on("updateRooms",function(){console.log("update rooms"),e.dispatch("getAllRooms")}),n.on("updateRoom",function(t){e.state.room&&t.roomID===e.state.room._id&&e.dispatch("getRoom")}),n.on("updateGameStage",function(t){e.state.room&&t.roomID===e.state.room._id&&(e.dispatch("setGameStage",t.gameStage),t.room&&e.commit(x,t.room))}),n.on("gameTimer",function(t){e.state.room&&t.roomID===e.state.room._id&&e.commit(P,t.time)}),n.on("gameDeleted",function(t){console.log("data",t),e.state.room&&t.roomID===e.state.room._id&&e.commit(x,null)});var a=function(){t||(t=q()("http://localhost:5000/".concat(e.state.room._id)),t.on("gameDeleted",function(){e.commit(x,null)}))};e.subscribe(function(r){r.type===E&&e.state.room&&a(),r.type===x&&a(),r.type===j&&n&&"gameOnlinePlay"===e.state.gameStage&&n.emit("gameScore",{score:e.state.score,nickName:e.state.player.nickName,roomID:e.state.room._id}),r.type!==T&&r.type!==C||t&&(t.removeAllListeners(),t=null)})};a["a"].use(h["a"]);var J=new h["a"].Store({state:{score:0,gameStage:"gameStart",gameTime:60,room:null,player:{},rooms:[],onlineTimer:60,systemMessage:""},getters:{showScore:function(e){var t=4,n=e.score.toString().length,a=t-n;return a>0?Array(a).join(0)+e.score:e.score}},mutations:D,actions:L,plugins:[B]});a["a"].config.productionTip=!1,a["a"].use(r["a"],{events:"input|blur"}),new a["a"]({router:_,store:J,render:function(e){return e(m)}}).$mount("#app")},9308:function(e,t,n){},bc89:function(e,t,n){"use strict";var a=n("9308"),r=n.n(a);r.a}});
//# sourceMappingURL=app.29c62b15.js.map